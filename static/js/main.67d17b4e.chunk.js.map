{"version":3,"sources":["utils/consts.js","components/Navbar.js","components/Login.js","firebase.js","components/Chat.js","routes.js","components/AppRouter.js","App.js","reportWebVitals.js","index.js"],"names":["LOGIN_ROUTE","CHAT_ROUTE","Navbar","authorization","useContext","Context","useAuthState","user","AppBar","className","position","Toolbar","Grid","container","justify","to","Button","onClick","signOut","variant","color","Login","useState","open","setOpen","a","provider","firebase","auth","GoogleAuthProvider","signInWithPopup","console","log","Container","style","height","window","innerHeight","alignItems","p","Box","Dialog","onClose","aria-labelledby","aria-describedby","DialogActions","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","store","storage","microphone","SpeechRecognition","webkitSpeechRecognition","continuous","interimResults","lang","Chat","publicRoutes","path","Component","privateRoutes","values","setValue","useCollectionData","collection","orderBy","messages","isListening","setListening","note","setNotes","clip","setClip","saveFile","setSaveFile","progress","setProgress","add","uid","displayName","photoAvatar","photoURL","text","createdAt","FieldValue","serverTimestamp","clipDocument","alert","useEffect","HandleListening","start","onend","stop","onstart","onresult","event","transcription","Array","from","results","map","result","transcript","join","onerror","error","message","background","marginLeft","Avatar","marginRight","src","fontSize","textAlign","toDate","toString","substring","CircularProgress","value","direction","width","spacing","item","TextField","onChange","e","target","InputProps","endAdornment","InputAdornment","prevState","acceptedFiles","cancelButtonText","filesLimit","submitButtonText","dropzoneText","dialogTitle","getFileLimitExceedMessage","getFileAddedMessage","getFileRemovedMessage","getDropRejectMessage","getPreviewIcon","fileObject","file","type","Description","PictureAsPdf","GraphicEq","Theaters","maxFileSize","onSave","files","upload","obj","Object","assign","ref","name","put","on","snapshot","progreessUploading","Math","round","bytesTransferred","totalBytes","UploadDocuments","showPreviews","showFileNamesInPreview","Tooltip","title","arrow","Chip","navigator","clipboard","writeText","size","label","marginTop","get","then","querySnapshot","docs","doc","delete","fullWidth","startIcon","AppRouter","component","exect","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","createContext","ReactDOM","render","StrictMode","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.67d17b4e.chunk.js","sourcesContent":["export const LOGIN_ROUTE = '/login'\r\nexport const CHAT_ROUTE = '/chat'\r\nexport const EXIT = '/'","import React, { Fragment, useContext } from 'react';\r\nimport { Link } from 'react-router-dom'; \r\n\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { CHAT_ROUTE, EXIT } from '../utils/consts';\r\nimport {useAuthState} from 'react-firebase-hooks/auth'\r\nimport {Context} from '../index'\r\n\r\nfunction Navbar() {\r\n\r\n const {authorization} = useContext(Context)\r\n const [user] = useAuthState(authorization)\r\n\r\n return (\r\n  <AppBar className='navbar_container' position=\"static\">\r\n  <Toolbar>\r\n   <Grid container justify={'flex-end'}>\r\n    {user ? \r\n     <Fragment>\r\n      <Link \r\n       className='navbar_link'\r\n       to={CHAT_ROUTE}\r\n       >\r\n        <Button onClick={() => {authorization.signOut()}} className='navbar_logBtn' variant={'outlined'} color=\"inherit\">Выйти</Button>\r\n      </Link>\r\n     </Fragment>\r\n     :\r\n     <Fragment>\r\n     <Link \r\n      className='navbar_link'\r\n      to={EXIT}\r\n      >\r\n     <Button variant={'outlined'} color=\"inherit\">Логин</Button>\r\n     </Link>\r\n    </Fragment>\r\n    }\r\n   </Grid>\r\n\r\n  </Toolbar>\r\n</AppBar>\r\n );\r\n}\r\n\r\nexport default Navbar;","import React, {useContext, useState} from 'react';\r\nimport Container from '@material-ui/core/Container';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport {Context} from '../index'\r\nimport firebase from 'firebase'\r\n\r\nfunction Login() {\r\n\r\n const [open, setOpen] = useState(true);\r\n\r\n  const ShowBtnPopup = () => {\r\n    setOpen(false);\r\n  };\r\n  // useContext - хук для передачи пропсов минуя родительско-дочернюю связь\r\n  const {authorization} = useContext(Context)\r\n  // вхлд с помощью системы\r\n  const Login = async() => {\r\n    const provider = new firebase.auth.GoogleAuthProvider()\r\n    const {user} = await authorization.signInWithPopup(provider)\r\n    console.log(user);\r\n  }\r\n return (\r\n  <div>\r\n   <Container>\r\n   <Grid \r\n    className='form-grid_container' \r\n    container \r\n    style={{height: window.innerHeight - 50}}\r\n    justify={'center'}\r\n    alignItems={'center'}\r\n    >\r\n     <Grid p={5}\r\n      container\r\n      alignItems={'center'}\r\n      justify={'center'}\r\n     >\r\n     <Box>\r\n     <Dialog\r\n        open={open}\r\n        onClose={ShowBtnPopup}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogActions>\r\n          <Button onClick={Login} variant={'outlined'}>Войти с помощью Google</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n     </Box>\r\n     </Grid>\r\n\r\n   </Grid>\r\n   </Container>\r\n  </div>\r\n );\r\n}\r\n\r\nexport default Login;","import firebase from 'firebase'\r\nimport 'firebase/firestore'\r\nimport 'firebase/storage'\r\n\r\nimport 'firebase/auth'\r\n// Initialize Firebase\r\nfirebase.initializeApp(\r\n    {\r\n      apiKey: \"AIzaSyClxns3GYA-V9RmgDIDQkNtTwZy59ugfuQ\",\r\n      authDomain: \"chat-react-2ff9d.firebaseapp.com\",\r\n      projectId: \"chat-react-2ff9d\",\r\n      storageBucket: \"chat-react-2ff9d.appspot.com\",\r\n      messagingSenderId: \"560825640305\",\r\n      appId: \"1:560825640305:web:100e2fdb7d31233c2002d0\"\r\n    }\r\n  );\r\n\r\n  export const authorization = firebase.auth()\r\n  export const firestore = firebase.firestore()\r\n  export const store = firebase.storage()\r\n","import Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Container from '@material-ui/core/Container';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport RecordVoiceOverIcon from '@material-ui/icons/RecordVoiceOver';\r\nimport PauseIcon from '@material-ui/icons/Pause';\r\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\r\nimport InputAdornment from '@material-ui/core/InputAdornment'\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport firebase from 'firebase';\r\n\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport { useAuthState } from 'react-firebase-hooks/auth';\r\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\r\nimport { Context } from '../index';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport { DropzoneDialog } from 'material-ui-dropzone';\r\nimport Chip from '@material-ui/core/Chip'\r\nimport {Theaters} from '@material-ui/icons'\r\nimport {GraphicEqIcon} from '@material-ui/icons/GraphicEq';\r\nimport {Description} from '@material-ui/icons'\r\nimport {PictureAsPdf} from '@material-ui/icons'\r\nimport NoteAddIcon from '@material-ui/icons/NoteAdd';\r\n\r\nimport {store} from '../firebase'\r\n\r\n\r\n// настройка распознания речи \r\nconst speechRecord = window.SpeechRecognition || window.webkitSpeechRecognition\r\nconst microphone = new speechRecord()\r\nmicrophone.continuous = true\r\nmicrophone.interimResults = false\r\nmicrophone.lang = 'ru'\r\n\r\nfunction Chat() {\r\n const {authorization, firestore} = useContext(Context)\r\n const [user] = useAuthState(authorization)\r\n const [values, setValue] = useState('')\r\n const [messages =[]] = useCollectionData(\r\n    firestore.collection('messages').orderBy('createdAt')\r\n  )\r\n  const [isListening, setListening] = useState(false)\r\n  const [note, setNotes] = useState('')\r\n  const [clip, setClip] = useState(false);\r\n  const [saveFile, setSaveFile] = useState(null)\r\n  const [progress, setProgress] = useState(0)\r\n\r\n\r\n // ф-я отправки сообщений\r\n  async function SendMessage () {\r\n    if (values != '') {\r\n      firestore.collection('messages').add({\r\n        uid: user.uid,\r\n        displayName: user.displayName,\r\n        photoAvatar: user.photoURL,\r\n        text: values,\r\n        createdAt: firebase.firestore.FieldValue.serverTimestamp(),\r\n        clipDocument:saveFile\r\n       })\r\n       setValue('')\r\n    }\r\n    else {\r\n      alert('Error!')\r\n    }\r\n }\r\n\r\n\r\n\r\n function DeleteMessage() {\r\n    firestore.collection('messages')\r\n    .get()\r\n    .then(querySnapshot => {\r\n        querySnapshot.docs.map(doc => {\r\n        doc.ref.delete()\r\n        });\r\n    });\r\n }\r\n\r\n  useEffect(() => {\r\n    HandleListening()\r\n\r\n  }, [isListening])\r\n\r\n\r\n  const HandleListening = () => {\r\n    if(isListening) {\r\n      microphone.start()\r\n      microphone.onend = () => {\r\n        console.log('continue...');\r\n        microphone.start()\r\n      }\r\n    }\r\n    else {\r\n      microphone.stop()\r\n      microphone.onend = () => {\r\n        console.log('Micro stop worked');\r\n      }\r\n    }\r\n    microphone.onstart = () => {\r\n      console.log('Micro on');\r\n    }\r\n    microphone.onresult = (event) => {\r\n      const transcription = Array.from(event.results)\r\n      .map(result => result[0])\r\n      .map(result => result.transcript)\r\n      .join('')\r\n      setNotes(transcription)\r\n      console.log(\"Voice:\",transcription);\r\n      microphone.onerror = (event) => {\r\n        console.log(event.error);\r\n      }\r\n    }\r\n  }\r\n  // определитель типа файлов\r\n  const TypeChangeIcon = (fileObject) => {\r\n    const {type} = fileObject.file\r\n    switch (type) {\r\n      case \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\":\r\n        return <Description />\r\n      case \"application/pdf\":\r\n        return <PictureAsPdf />\r\n      case \"video/mpeg\":\r\n          return <GraphicEqIcon />\r\n      case \"application/mp4\":\r\n          return <Theaters />\r\n      default:\r\n        return <Description />\r\n    }\r\n  }\r\n  // const HandleSave = () => {\r\n  //   setSaveText([...saveText, note])\r\n  //   setNotes('')\r\n  // }\r\n\r\n\r\n return (\r\n  <div>\r\n   <Container>\r\n    <Grid\r\n     container \r\n     style={{height: window.innerHeight - 50}}\r\n     justify={'center'}\r\n     >\r\n      <div className='chat__field'>\r\n        {messages.map(message => \r\n        \r\n          <div className=\"chat__sendMessage\"\r\n          style={{\r\n            background: user.uid === message.uid ? '#e1e1e1' : '#caa3ff',\r\n            marginLeft: user.uid === message.uid ? '0' : '15%'\r\n           }}\r\n          >\r\n            <Grid>\r\n             <div className=\"line\">\r\n             <Avatar \r\n                style={{marginRight:'8px'}}\r\n                src={message.photoAvatar}\r\n              />\r\n              <div className=\"chat__textBody\">\r\n              <span className='chat__SendTime' style={{fontSize: '12px', textAlign: 'right', marginLeft: '82%'}}> {message.createdAt.toDate().toString().substring(16,21)}</span> <br />\r\n                <div className=\"chat__textArea\">\r\n                  <div className=\"chat__text\">\r\n                  <span className='chat__personName'> {message.displayName}</span> <br />\r\n                    {message.text}\r\n                  </div>\r\n                   <div className=\"chat__clipFiles\">\r\n                   <NoteAddIcon />\r\n                  { progress !=100? \r\n                    <div className=\"chat__download\">\r\n                       <CircularProgress value={progress} />\r\n                       <i> Процесс загрузки документа:</i> <b> {progress}</b> <i>%</i>\r\n                    </div>\r\n                    :\r\n                    saveFile[0].path\r\n                  }\r\n                 </div>\r\n\r\n                </div>\r\n              </div>\r\n             </div>\r\n            </Grid>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <Grid\r\n         container\r\n         direction={'column'}\r\n         alignItems={'center'}\r\n         style={{width: '80%',}}\r\n        >\r\n         <Grid container spacing={1} alignItems=\"center\">         \r\n          <Grid item>\r\n\r\n         <div className=\"text-field \">\r\n         <TextField\r\n          onChange={e => setValue(e.target.value)}\r\n          variant='outlined'\r\n          InputProps={{\r\n            endAdornment: \r\n            <InputAdornment>\r\n             <SendIcon \r\n                onClick={SendMessage}\r\n              />\r\n            </InputAdornment>,\r\n          }}\r\n          />\r\n           {isListening ?\r\n           <Button onClick={() => setListening(prevState => !prevState)} >\r\n            <RecordVoiceOverIcon />\r\n          </Button>\r\n           : \r\n           <Button onClick={() => setListening(prevState => !prevState)}>\r\n              <PauseIcon />\r\n          </Button>\r\n           }\r\n           <Button>\r\n           <AttachFileIcon  onClick={() => setClip(true)}/>\r\n           </Button>\r\n            <DropzoneDialog\r\n              acceptedFiles={['image/*, .mpeg*, .mp3, .mp4', '.doc', '.docx', '.pdf', '.exe', '.rar', '.zip', '.iso']}\r\n              cancelButtonText={\"Отмена\"}\r\n              filesLimit={200}\r\n              submitButtonText={\"Прикрепить\"}\r\n              dropzoneText={\"Переместите и/или загрузите файлы сюда\"}\r\n              dialogTitle={\"Контейнер файлов\"}\r\n              getFileLimitExceedMessage={() => \"Превышен лимит загрузки. Максимальное количество файлов: 200\"}\r\n              getFileAddedMessage={() => \"Файл успешно добавлен!\"}\r\n              getFileRemovedMessage={() => \"Файл успешно удален!\"}\r\n              getDropRejectMessage={() => \"Ошибка! Не поддерживаемый формат файла.\"}\r\n              getPreviewIcon={TypeChangeIcon}\r\n              maxFileSize={100000000000}\r\n              open={clip}\r\n              onClose={() => setClip(false)}\r\n              onSave={(files) => {\r\n                console.log('Files:', files);\r\n                const UploadDocuments = () => {\r\n                  // преобразование к массиву объектов для возможности отправки\r\n                  const upload = files.map((obj)=> { return Object.assign({}, obj)});\r\n                  // поочередная загрузка\r\n                  for (let file of files) {\r\n                    console.log(file);\r\n                    firestore.collection('messages').add({\r\n                      clipDocument:upload\r\n                     })\r\n                    const UploadDocuments = store.ref(`store/${file.name}`).put(file)\r\n                    UploadDocuments.on(\r\n                      \"state_changed\",\r\n                      // расчет загрузки\r\n                      snapshot => {\r\n                        \r\n                        const progreessUploading = Math.round(\r\n                          (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n                        )\r\n                        console.log(`Прогресс загрузки: ${progreessUploading} %`);\r\n                        setProgress(progreessUploading)\r\n                        setSaveFile(upload)\r\n                      },\r\n                      error => {\r\n                        console.log(error);\r\n                      }\r\n                    )\r\n                  }\r\n                  console.log('Текущий файл:', saveFile);\r\n                }\r\n                UploadDocuments()\r\n\r\n              }}\r\n              showPreviews={true}\r\n              showFileNamesInPreview={true}\r\n            />\r\n\r\n         </div>\r\n\r\n          </Grid>\r\n          <Grid item>\r\n              {note ?\r\n                <Tooltip title=\" Кликните, чтобы скопировать выделенный текст\" arrow>\r\n                <Chip  onClick={() =>  navigator.clipboard.writeText(`${note}`)} size=\"small\" label={note} variant=\"outlined\" />\r\n              </Tooltip>\r\n              :''}\r\n\r\n          </Grid>\r\n            <Button\r\n            style={{marginTop: '20px'}}\r\n              onClick={DeleteMessage}\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              startIcon={<DeleteIcon />}\r\n            >\r\n             Удалить переписку\r\n            </Button>\r\n            {/* <h2>Save Record Text (test)</h2>\r\n            {/* {setsaveFile.map(message => (\r\n              <p key={message}>{message}</p>\r\n            ))} */} \r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n   </Container>\r\n  </div>\r\n );\r\n}\r\n\r\nexport default Chat;","import {CHAT_ROUTE, LOGIN_ROUTE} from './utils/consts'\r\nimport Login from './components/Login'\r\nimport Chat from './components/Chat'\r\n\r\n// все доступные маршуты для пользователей\r\nexport const publicRoutes = [\r\n {\r\n  path: LOGIN_ROUTE,\r\n  Component: Login\r\n }\r\n]\r\n// только для зарегистрированых  пользователей\r\nexport const privateRoutes = [\r\n {\r\n  path: CHAT_ROUTE,\r\n  Component: Chat\r\n }\r\n \r\n]","import React, {useContext} from 'react';\r\nimport {Route, Switch, Redirect} from 'react-router-dom'\r\nimport {privateRoutes, publicRoutes} from '../routes'\r\nimport { CHAT_ROUTE, LOGIN_ROUTE } from '../utils/consts';\r\nimport {useAuthState} from 'react-firebase-hooks/auth'\r\nimport {Context} from '../index'\r\n\r\nfunction AppRouter() {\r\n // рендеринг страницы для зарегистрированого пользователя \r\n const {authorization} = useContext(Context)\r\n const [user] = useAuthState(authorization)\r\n//  console.log(user);\r\n return user ? \r\n   (\r\n    <Switch>\r\n     {privateRoutes.map(({path, Component}) => \r\n      <Route key={path} path={path} component={Component} exect={true} />\r\n     )}\r\n     <Redirect to={CHAT_ROUTE} />\r\n    </Switch>\r\n   )\r\n   :\r\n    // рендеринг страницы для зарегистрированого пользователя \r\n   (\r\n    <Switch>\r\n      {publicRoutes.map(({path, Component}) => \r\n        <Route key={path} path={path} component={Component} exect={true} />\r\n      )}\r\n      <Redirect to={LOGIN_ROUTE} />\r\n    </Switch>\r\n   )\r\n}\r\n\r\nexport default AppRouter;","import React, {useContext} from 'react';\nimport { BrowserRouter } from 'react-router-dom'; \nimport {useAuthState} from 'react-firebase-hooks/auth'\nimport Navbar from './components/Navbar'\nimport AppRouter from './components/AppRouter'\nimport {Context} from './index'\n\n\nfunction App() {\n  const {authorization} = useContext(Context)\n  const [loading] = useAuthState(authorization)\n  return (\n    <BrowserRouter>\n      <Navbar />\n      <AppRouter />\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React, { createContext } from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {authorization, firestore } from './firebase'\n\n\n// useContext - хук для передачи пропсов минуя родительско-дочернюю связь\nexport const Context = createContext(null)\n\nReactDOM.render(\n  <React.StrictMode>\n    <Context.Provider  value ={{\n      authorization,\n      firestore\n    }}>\n    <App />\n    </Context.Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}