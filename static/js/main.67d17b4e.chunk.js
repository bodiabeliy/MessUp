(this.webpackJsonpdialog=this.webpackJsonpdialog||[]).push([[0],{134:function(e,t,n){},159:function(e,t,n){"use strict";n.r(t),n.d(t,"Context",(function(){return se}));var c=n(0),a=n.n(c),i=n(17),r=n.n(i),o=(n(134),n(18)),s=n(54),l=n(43),j=n(202),u=n(205),d=n(207),b=n(206),h="/login",O="/chat",x=n(7);var p=function(){var e=Object(c.useContext)(se).authorization,t=Object(l.a)(e),n=Object(o.a)(t,1)[0];return Object(x.jsx)(j.a,{className:"navbar_container",position:"static",children:Object(x.jsx)(u.a,{children:Object(x.jsx)(b.a,{container:!0,justify:"flex-end",children:n?Object(x.jsx)(c.Fragment,{children:Object(x.jsx)(s.b,{className:"navbar_link",to:O,children:Object(x.jsx)(d.a,{onClick:function(){e.signOut()},className:"navbar_logBtn",variant:"outlined",color:"inherit",children:"\u0412\u044b\u0439\u0442\u0438"})})}):Object(x.jsx)(c.Fragment,{children:Object(x.jsx)(s.b,{className:"navbar_link",to:"/",children:Object(x.jsx)(d.a,{variant:"outlined",color:"inherit",children:"\u041b\u043e\u0433\u0438\u043d"})})})})})})},f=n(22),m=n(19),g=n.n(m),v=n(71),y=n(208),w=n(219),C=n(221),_=n(210),N=n(42);var k=function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(c.useContext)(se).authorization,r=function(){var e=Object(v.a)(g.a.mark((function e(){var t,n,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new N.a.auth.GoogleAuthProvider,e.next=3,i.signInWithPopup(t);case 3:n=e.sent,c=n.user,console.log(c);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{children:Object(x.jsx)(y.a,{children:Object(x.jsx)(b.a,{className:"form-grid_container",container:!0,style:{height:window.innerHeight-50},justify:"center",alignItems:"center",children:Object(x.jsx)(b.a,{p:5,container:!0,alignItems:"center",justify:"center",children:Object(x.jsx)(w.a,{children:Object(x.jsx)(C.a,{open:n,onClose:function(){a(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:Object(x.jsx)(_.a,{children:Object(x.jsx)(d.a,{onClick:r,variant:"outlined",children:"\u0412\u043e\u0439\u0442\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e Google"})})})})})})})})},S=n(99),I=n(223),F=n(217),A=n(73),z=n.n(A),T=n(111),B=n.n(T),M=n(112),P=n.n(M),D=n(74),R=n.n(D),L=n(216),E=n(110),G=n.n(E),V=n(100),H=n(215),J=n(224),Q=n(114),W=n(222),q=n(214),K=n(108),U=n(212),Y=n(213),Z=n(109),X=n.n(Z);n(155),n(156),n(157);N.a.initializeApp({apiKey:"AIzaSyClxns3GYA-V9RmgDIDQkNtTwZy59ugfuQ",authDomain:"chat-react-2ff9d.firebaseapp.com",projectId:"chat-react-2ff9d",storageBucket:"chat-react-2ff9d.appspot.com",messagingSenderId:"560825640305",appId:"1:560825640305:web:100e2fdb7d31233c2002d0"});var $=N.a.auth(),ee=N.a.firestore(),te=N.a.storage(),ne=new(window.SpeechRecognition||window.webkitSpeechRecognition);ne.continuous=!0,ne.interimResults=!1,ne.lang="ru";var ce=[{path:h,Component:k}],ae=[{path:O,Component:function(){var e=Object(c.useContext)(se),t=e.authorization,n=e.firestore,a=Object(l.a)(t),i=Object(o.a)(a,1)[0],r=Object(c.useState)(""),s=Object(o.a)(r,2),j=s[0],u=s[1],h=Object(V.a)(n.collection("messages").orderBy("createdAt")),O=Object(o.a)(h,1)[0],p=void 0===O?[]:O,f=Object(c.useState)(!1),m=Object(o.a)(f,2),w=m[0],C=m[1],_=Object(c.useState)(""),k=Object(o.a)(_,2),A=k[0],T=k[1],M=Object(c.useState)(!1),D=Object(o.a)(M,2),E=D[0],Z=D[1],$=Object(c.useState)(null),ee=Object(o.a)($,2),ce=ee[0],ae=ee[1],ie=Object(c.useState)(0),re=Object(o.a)(ie,2),oe=re[0],le=re[1];function je(){return(je=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""!=j?(n.collection("messages").add({uid:i.uid,displayName:i.displayName,photoAvatar:i.photoURL,text:j,createdAt:N.a.firestore.FieldValue.serverTimestamp(),clipDocument:ce}),u("")):alert("Error!");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){ue()}),[w]);var ue=function(){w?(ne.start(),ne.onend=function(){console.log("continue..."),ne.start()}):(ne.stop(),ne.onend=function(){console.log("Micro stop worked")}),ne.onstart=function(){console.log("Micro on")},ne.onresult=function(e){var t=Array.from(e.results).map((function(e){return e[0]})).map((function(e){return e.transcript})).join("");T(t),console.log("Voice:",t),ne.onerror=function(e){console.log(e.error)}}};return Object(x.jsx)("div",{children:Object(x.jsx)(y.a,{children:Object(x.jsxs)(b.a,{container:!0,style:{height:window.innerHeight-50},justify:"center",children:[Object(x.jsx)("div",{className:"chat__field",children:p.map((function(e){return Object(x.jsx)("div",{className:"chat__sendMessage",style:{background:i.uid===e.uid?"#e1e1e1":"#caa3ff",marginLeft:i.uid===e.uid?"0":"15%"},children:Object(x.jsx)(b.a,{children:Object(x.jsxs)("div",{className:"line",children:[Object(x.jsx)(I.a,{style:{marginRight:"8px"},src:e.photoAvatar}),Object(x.jsxs)("div",{className:"chat__textBody",children:[Object(x.jsxs)("span",{className:"chat__SendTime",style:{fontSize:"12px",textAlign:"right",marginLeft:"82%"},children:[" ",e.createdAt.toDate().toString().substring(16,21)]})," ",Object(x.jsx)("br",{}),Object(x.jsxs)("div",{className:"chat__textArea",children:[Object(x.jsxs)("div",{className:"chat__text",children:[Object(x.jsxs)("span",{className:"chat__personName",children:[" ",e.displayName]})," ",Object(x.jsx)("br",{}),e.text]}),Object(x.jsxs)("div",{className:"chat__clipFiles",children:[Object(x.jsx)(X.a,{}),100!=oe?Object(x.jsxs)("div",{className:"chat__download",children:[Object(x.jsx)(H.a,{value:oe}),Object(x.jsx)("i",{children:" \u041f\u0440\u043e\u0446\u0435\u0441\u0441 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430:"})," ",Object(x.jsxs)("b",{children:[" ",oe]})," ",Object(x.jsx)("i",{children:"%"})]}):ce[0].path]})]})]})]})})})}))}),Object(x.jsx)(b.a,{container:!0,direction:"column",alignItems:"center",style:{width:"80%"},children:Object(x.jsxs)(b.a,{container:!0,spacing:1,alignItems:"center",children:[Object(x.jsx)(b.a,{item:!0,children:Object(x.jsxs)("div",{className:"text-field ",children:[Object(x.jsx)(F.a,{onChange:function(e){return u(e.target.value)},variant:"outlined",InputProps:{endAdornment:Object(x.jsx)(L.a,{children:Object(x.jsx)(G.a,{onClick:function(){return je.apply(this,arguments)}})})}}),w?Object(x.jsx)(d.a,{onClick:function(){return C((function(e){return!e}))},children:Object(x.jsx)(B.a,{})}):Object(x.jsx)(d.a,{onClick:function(){return C((function(e){return!e}))},children:Object(x.jsx)(P.a,{})}),Object(x.jsx)(d.a,{children:Object(x.jsx)(R.a,{onClick:function(){return Z(!0)}})}),Object(x.jsx)(Q.a,{acceptedFiles:["image/*, .mpeg*, .mp3, .mp4",".doc",".docx",".pdf",".exe",".rar",".zip",".iso"],cancelButtonText:"\u041e\u0442\u043c\u0435\u043d\u0430",filesLimit:200,submitButtonText:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c",dropzoneText:"\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u0435 \u0438/\u0438\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u0430\u0439\u043b\u044b \u0441\u044e\u0434\u0430",dialogTitle:"\u041a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u0444\u0430\u0439\u043b\u043e\u0432",getFileLimitExceedMessage:function(){return"\u041f\u0440\u0435\u0432\u044b\u0448\u0435\u043d \u043b\u0438\u043c\u0438\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438. \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0444\u0430\u0439\u043b\u043e\u0432: 200"},getFileAddedMessage:function(){return"\u0424\u0430\u0439\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d!"},getFileRemovedMessage:function(){return"\u0424\u0430\u0439\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d!"},getDropRejectMessage:function(){return"\u041e\u0448\u0438\u0431\u043a\u0430! \u041d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0430."},getPreviewIcon:function(e){switch(e.file.type){case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return Object(x.jsx)(U.a,{});case"application/pdf":return Object(x.jsx)(Y.a,{});case"video/mpeg":return Object(x.jsx)(K.GraphicEqIcon,{});case"application/mp4":return Object(x.jsx)(q.a,{});default:return Object(x.jsx)(U.a,{})}},maxFileSize:1e11,open:E,onClose:function(){return Z(!1)},onSave:function(e){console.log("Files:",e);!function(){var t,c=e.map((function(e){return Object.assign({},e)})),a=Object(S.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;console.log(i),n.collection("messages").add({clipDocument:c}),te.ref("store/".concat(i.name)).put(i).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);console.log("\u041f\u0440\u043e\u0433\u0440\u0435\u0441\u0441 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438: ".concat(t," %")),le(t),ae(c)}),(function(e){console.log(e)}))}}catch(r){a.e(r)}finally{a.f()}console.log("\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0444\u0430\u0439\u043b:",ce)}()},showPreviews:!0,showFileNamesInPreview:!0})]})}),Object(x.jsx)(b.a,{item:!0,children:A?Object(x.jsx)(J.a,{title:" \u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442",arrow:!0,children:Object(x.jsx)(W.a,{onClick:function(){return navigator.clipboard.writeText("".concat(A))},size:"small",label:A,variant:"outlined"})}):""}),Object(x.jsx)(d.a,{style:{marginTop:"20px"},onClick:function(){n.collection("messages").get().then((function(e){e.docs.map((function(e){e.ref.delete()}))}))},fullWidth:!0,variant:"contained",color:"secondary",startIcon:Object(x.jsx)(z.a,{}),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u043f\u0438\u0441\u043a\u0443"})]})})]})})})}}];var ie=function(){var e=Object(c.useContext)(se).authorization,t=Object(l.a)(e);return Object(o.a)(t,1)[0]?Object(x.jsxs)(f.d,{children:[ae.map((function(e){var t=e.path,n=e.Component;return Object(x.jsx)(f.b,{path:t,component:n,exect:!0},t)})),Object(x.jsx)(f.a,{to:O})]}):Object(x.jsxs)(f.d,{children:[ce.map((function(e){var t=e.path,n=e.Component;return Object(x.jsx)(f.b,{path:t,component:n,exect:!0},t)})),Object(x.jsx)(f.a,{to:h})]})};var re=function(){var e=Object(c.useContext)(se).authorization,t=Object(l.a)(e);return Object(o.a)(t,1)[0],Object(x.jsxs)(s.a,{children:[Object(x.jsx)(p,{}),Object(x.jsx)(ie,{})]})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,226)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))},se=Object(c.createContext)(null);r.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(se.Provider,{value:{authorization:$,firestore:ee},children:Object(x.jsx)(re,{})})}),document.getElementById("root")),oe()}},[[159,1,2]]]);
//# sourceMappingURL=main.67d17b4e.chunk.js.map